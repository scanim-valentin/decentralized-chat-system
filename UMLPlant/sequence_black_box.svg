<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1223px" preserveAspectRatio="none" style="width:608px;height:1223px;background:#FFFFFF;" version="1.1" viewBox="0 0 608 1223" width="608px" zoomAndPan="magnify"><defs><filter height="300%" id="f11et6yfyj355s" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="104.4001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="120.3999"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="166.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="254.4"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="104.4001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="479.8"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="163.6001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="613.8001"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="45.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="807.0002"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="120.0001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="911.4002"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="59.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="1061.0003"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522" y="150"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522" y="509.4"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522" y="941.0002"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="581.5" y="643.4001"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="166.2" style="stroke:#000000;stroke-width:2.0;" width="466" x="10" y="269.4"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="134.6" style="stroke:#000000;stroke-width:2.0;" width="446" x="20" y="294"/><rect fill="#FFFFFF" height="44.7999" style="stroke:none;stroke-width:1.0;" width="446" x="20" y="383.8001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="52" x2="52" y1="88.7999" y2="1138.2003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="301.5" x2="301.5" y1="88.7999" y2="1138.2003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="527" x2="527" y1="88.7999" y2="1138.2003"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="586" x2="586" y1="88.7999" y2="1138.2003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="30" y="85.0059">User1</text><ellipse cx="52" cy="15" fill="#FEFECE" filter="url(#f11et6yfyj355s)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M52,23 L52,50 M39,31 L65,31 M52,50 L39,65 M52,50 L65,65 " fill="none" filter="url(#f11et6yfyj355s)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="30" y="1150.2063">User1</text><ellipse cx="52" cy="1164.0003" fill="#FEFECE" filter="url(#f11et6yfyj355s)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M52,1172.0003 L52,1199.0003 M39,1180.0003 L65,1180.0003 M52,1199.0003 L39,1214.0003 M52,1199.0003 L65,1214.0003 " fill="none" filter="url(#f11et6yfyj355s)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f11et6yfyj355s)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="85" x="257.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="264.5" y="73.0059">Chat Agent</text><rect fill="#FEFECE" filter="url(#f11et6yfyj355s)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="85" x="257.5" y="1137.2003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="264.5" y="1157.2063">Chat Agent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="498" y="85.0059">Network</text><ellipse cx="527" cy="15" fill="#FEFECE" filter="url(#f11et6yfyj355s)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M527,23 L527,50 M514,31 L540,31 M527,50 L514,65 M527,50 L540,65 " fill="none" filter="url(#f11et6yfyj355s)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="498" y="1150.2063">Network</text><ellipse cx="527" cy="1164.0003" fill="#FEFECE" filter="url(#f11et6yfyj355s)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M527,1172.0003 L527,1199.0003 M514,1180.0003 L540,1180.0003 M527,1199.0003 L514,1214.0003 M527,1199.0003 L540,1214.0003 " fill="none" filter="url(#f11et6yfyj355s)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="566" y="85.0059">Clock</text><ellipse cx="586.5" cy="15" fill="#FEFECE" filter="url(#f11et6yfyj355s)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M586.5,23 L586.5,50 M573.5,31 L599.5,31 M586.5,50 L573.5,65 M586.5,50 L599.5,65 " fill="none" filter="url(#f11et6yfyj355s)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="566" y="1150.2063">Clock</text><ellipse cx="586.5" cy="1164.0003" fill="#FEFECE" filter="url(#f11et6yfyj355s)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M586.5,1172.0003 L586.5,1199.0003 M573.5,1180.0003 L599.5,1180.0003 M586.5,1199.0003 L573.5,1214.0003 M586.5,1199.0003 L599.5,1214.0003 " fill="none" filter="url(#f11et6yfyj355s)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="104.4001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="120.3999"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="166.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="254.4"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="104.4001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="479.8"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="163.6001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="613.8001"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="45.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="807.0002"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="120.0001" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="911.4002"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="59.2" style="stroke:#A80036;stroke-width:1.0;" width="10" x="297" y="1061.0003"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522" y="150"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522" y="509.4"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522" y="941.0002"/><rect fill="#FFFFFF" filter="url(#f11et6yfyj355s)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="581.5" y="643.4001"/><polygon fill="#A80036" points="285,116.3999,295,120.3999,285,124.3999,289,120.3999" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="291" y1="120.3999" y2="120.3999"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="59" y="114.8769">Opens Agent</text><polygon fill="#A80036" points="510,146,520,150,510,154,514,150" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="516" y1="150" y2="150"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="314" y="144.477">getConnectedUserList()</text><polygon fill="#A80036" points="318,175.6,308,179.6,318,183.6,314,179.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="526" y1="179.6" y2="179.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="324" y="174.077">user_list</text><polygon fill="#A80036" points="63,220.8,53,224.8,63,228.8,59,224.8" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="224.8" y2="224.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="69" y="203.677">Shows UI :</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="69" y="219.277">Username Input</text><polygon fill="#A80036" points="285,250.4,295,254.4,285,258.4,289,254.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="291" y1="254.4" y2="254.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="59" y="248.877">Logins as "name"</text><path d="M10,269.4 L83,269.4 L83,276.4 L73,286.4 L10,286.4 L10,269.4 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="166.2" style="stroke:#000000;stroke-width:2.0;" width="466" x="10" y="269.4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="282.477">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="98" y="281.6189">[if !isUsernameValid]</text><path d="M20,294 L80,294 L80,301 L70,311 L20,311 L20,294 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="134.6" style="stroke:#000000;stroke-width:2.0;" width="446" x="20" y="294"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15" x="35" y="307.077">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="95" y="306.2189">[name available]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="349" y1="333.2001" y2="333.2001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="349" x2="349" y1="333.2001" y2="346.2001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="308" x2="349" y1="346.2001" y2="346.2001"/><polygon fill="#A80036" points="318,342.2001,308,346.2001,318,350.2001,314,346.2001" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="314" y="327.677">isUsernameValid = True</text><polygon fill="#A80036" points="63,371.8001,53,375.8001,63,379.8001,59,375.8001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="296" y1="375.8001" y2="375.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="69" y="370.2771">Shows Connected User List</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="466" y1="384.8001" y2="384.8001"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="25" y="395.019">[name already taken]</text><polygon fill="#A80036" points="63,416.6,53,420.6,63,424.6,59,420.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="420.6" y2="420.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="69" y="415.077">Shows invalid input message</text><polygon fill="#A80036" points="285,475.8,295,479.8,285,483.8,289,479.8" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="291" y1="479.8" y2="479.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="59" y="458.677">Starts Chatting Session</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="59" y="474.277">with User2</text><polygon fill="#A80036" points="510,505.4,520,509.4,510,513.4,514,509.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="516" y1="509.4" y2="509.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="314" y="503.877">retrieveHistory(User2)</text><polygon fill="#A80036" points="318,535,308,539,318,543,314,539" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="526" y1="539" y2="539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="324" y="533.477">history_user2</text><polygon fill="#A80036" points="63,580.2001,53,584.2001,63,588.2001,59,584.2001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="584.2001" y2="584.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="69" y="563.077">Shows UI :</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="69" y="578.6771">Chat window with conversation history</text><polygon fill="#A80036" points="285,609.8001,295,613.8001,285,617.8001,289,613.8001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="291" y1="613.8001" y2="613.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="59" y="608.2771">Sends Message M1</text><polygon fill="#A80036" points="569.5,639.4001,579.5,643.4001,569.5,647.4001,573.5,643.4001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="575.5" y1="643.4001" y2="643.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="314" y="637.8771">getTime()</text><polygon fill="#A80036" points="318,669.0001,308,673.0001,318,677.0001,314,673.0001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="585.5" y1="673.0001" y2="673.0001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="324" y="667.4771">current_time</text><polygon fill="#A80036" points="515,698.6001,525,702.6001,515,706.6001,519,702.6001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="521" y1="702.6001" y2="702.6001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="314" y="697.0771">sendMessage(User2,M1)</text><polygon fill="#A80036" points="515,728.2001,525,732.2001,515,736.2001,519,732.2001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="521" y1="732.2001" y2="732.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="314" y="726.6771">updateHistory(User2,M1)</text><polygon fill="#A80036" points="63,773.4002,53,777.4002,63,781.4002,59,777.4002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="777.4002" y2="777.4002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="69" y="756.2771">Shows UI :</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="73" y="771.8772">Updated chat with new message</text><polygon fill="#A80036" points="318,803.0002,308,807.0002,318,811.0002,314,807.0002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="526" y1="807.0002" y2="807.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="324" y="801.4772">Receive Messsage M2</text><polygon fill="#A80036" points="63,848.2002,53,852.2002,63,856.2002,59,852.2002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="852.2002" y2="852.2002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="69" y="831.0772">Shows UI :</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="73" y="846.6772">Updated chat with new message</text><polygon fill="#A80036" points="290,877.8002,300,881.8002,290,885.8002,294,881.8002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="296" y1="881.8002" y2="881.8002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="59" y="876.2772">Closes Chatting Session</text><polygon fill="#A80036" points="318,907.4002,308,911.4002,318,915.4002,314,911.4002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="526" y1="911.4002" y2="911.4002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="324" y="905.8772">Receive Messsage M3 from User3</text><polygon fill="#A80036" points="510,937.0002,520,941.0002,510,945.0002,514,941.0002" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="516" y1="941.0002" y2="941.0002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="314" y="935.4772">retrieveHistory(User3)</text><polygon fill="#A80036" points="318,966.6003,308,970.6003,318,974.6003,314,970.6003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="526" y1="970.6003" y2="970.6003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="324" y="965.0773">history_user3</text><polygon fill="#A80036" points="63,1027.4003,53,1031.4003,63,1035.4003,59,1031.4003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="1031.4003" y2="1031.4003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="69" y="994.6773">Shows UI :</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="73" y="1010.2773">Updated chat</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="69" y="1025.8773">with history and new message</text><polygon fill="#A80036" points="285,1057.0003,295,1061.0003,285,1065.0003,289,1061.0003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="291" y1="1061.0003" y2="1061.0003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="59" y="1055.4773">Closes Agent</text><polygon fill="#A80036" points="515,1086.6003,525,1090.6003,515,1094.6003,519,1090.6003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="307" x2="521" y1="1090.6003" y2="1090.6003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="314" y="1085.0773">notifyUsers()</text><polygon fill="#A80036" points="63,1116.2003,53,1120.2003,63,1124.2003,59,1120.2003" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="57" x2="301" y1="1120.2003" y2="1120.2003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="69" y="1114.6773">Closes UI</text><!--MD5=[874e7c2fb8bd5b7dfbb30543eb89b331]
@startuml sequence_black_box
actor User1 as User
participant "Chat Agent" as chatAgent
actor "Network" as Network
actor "Clock" as Clock

User -> chatAgent ++ : Opens Agent
chatAgent -> Network ++ : getConnectedUserList()
Network -> chatAgent - - : user_list
chatAgent -> User - - : Shows UI :\nUsername Input
User -> chatAgent ++ : Logins as "name"
loop if !isUsernameValid
alt name available
chatAgent -> chatAgent : isUsernameValid = True
User <- chatAgent : Shows Connected User List
    else name already taken
User <- chatAgent - - : Shows invalid input message
    end
end

User -> chatAgent ++ : Starts Chatting Session\nwith User2
  chatAgent -> Network ++ : retrieveHistory(User2)
  Network -> chatAgent - - : history_user2
chatAgent -> User - - : Shows UI :\nChat window with conversation history

User -> chatAgent ++ : Sends Message M1
  chatAgent -> Clock ++ : getTime()
  Clock -> chatAgent - - : current_time
  chatAgent -> Network : sendMessage(User2,M1)
  chatAgent -> Network : updateHistory(User2,M1)
chatAgent -> User - - : Shows UI :\n Updated chat with new message

Network -> chatAgent ++ : Receive Messsage M2
chatAgent -> User - - : Shows UI :\n Updated chat with new message

User -> chatAgent : Closes Chatting Session

Network -> chatAgent ++ : Receive Messsage M3 from User3
  chatAgent -> Network ++ : retrieveHistory(User3) 
  Network -> chatAgent - - : history_user3
chatAgent -> User - - : Shows UI :\n Updated chat\nwith history and new message

User -> chatAgent ++ : Closes Agent
  chatAgent -> Network : notifyUsers()
chatAgent -> User - - : Closes UI
@enduml

PlantUML version 1.2021.14(Fri Nov 12 17:46:50 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>