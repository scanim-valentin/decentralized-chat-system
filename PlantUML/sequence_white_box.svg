<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" contentScriptType="application/ecmascript" contentStyleType="text/css"
     height="3176px" preserveAspectRatio="none" style="width:1390px;height:3176px;background:#FFFFFF;" version="1.1"
     viewBox="0 0 1390 3176" width="1390px" zoomAndPan="magnify"><defs><filter height="300%" id="fzmftz1zxht66" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="3164.2891" style="stroke:#A80036;stroke-width:1.0;" width="866" x="166.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70" x="564.5" y="19.4951">Chat Agent</text><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="370.0234" style="stroke:#A80036;stroke-width:1.0;" width="10" x="452.5" y="183.9219"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="623" y="1719.3984"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="261.5156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="770" y="2383.6875"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="168.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="891.5" y="645"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="984" y="1247.7734"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="984" y="2066.1719"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1054" y="2537.7969"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="537.1641" style="stroke:#000000;stroke-width:2.0;" width="1251.5" x="10" y="513.2422"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="215.2969" style="stroke:#000000;stroke-width:2.0;" width="1091" x="160.5" y="828.1094"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="1091" x="160.5" y="997.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="107.2188" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="215.5" x2="215.5" y1="388.8828" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="457.5" x2="457.5" y1="107.2188" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="627.5" x2="627.5" y1="1212.1172" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="774.5" x2="774.5" y1="2030.5156" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="896.5" x2="896.5" y1="242.8359" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="988.5" x2="988.5" y1="324.6641" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1058.5" x2="1058.5" y1="107.2188" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1165.5" x2="1165.5" y1="107.2188" y2="3065.0703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1314.5" x2="1314.5" y1="107.2188" y2="3065.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="104.1426">User1</text><ellipse cx="41.5" cy="32.6094" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M41.5,40.6094 L41.5,67.6094 M28.5,48.6094 L54.5,48.6094 M41.5,67.6094 L28.5,82.6094 M41.5,67.6094 L54.5,82.6094 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="3078.6035">User1</text><ellipse cx="41.5" cy="3091.6797" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M41.5,3099.6797 L41.5,3126.6797 M28.5,3107.6797 L54.5,3107.6797 M41.5,3126.6797 L28.5,3141.6797 M41.5,3126.6797 L54.5,3141.6797 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="86" x="170.5" y="3064.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="177.5" y="3085.6035">UI Manager</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="136" x="387.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="421" y="74.5332">Main Class</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="394.5" y="92.1426">(and other classes)</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="136" x="387.5" y="3064.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="421" y="3085.6035">Main Class</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="394.5" y="3103.2129">(and other classes)</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="133" x="559.5" y="3064.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="566.5" y="3085.6035">Chatting Session 1</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="133" x="706.5" y="3064.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="713.5" y="3085.6035">Chatting Session 2</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="66.8281" style="stroke:#A80036;stroke-width:1.5;" width="82" x="853.5" y="3064.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="860.5" y="3085.6035">Distributed</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="879.5" y="3103.2129">Data</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="866.5" y="3120.8223">Manager</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="66.8281" style="stroke:#A80036;stroke-width:1.5;" width="75" x="949.5" y="3064.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="962.5" y="3085.6035">Remote</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="956.5" y="3103.2129">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="959" y="3120.8223">Manager</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1038.5" y="104.1426">Clock</text><ellipse cx="1059" cy="32.6094" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1059,40.6094 L1059,67.6094 M1046,48.6094 L1072,48.6094 M1059,67.6094 L1046,82.6094 M1059,67.6094 L1072,82.6094 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1038.5" y="3078.6035">Clock</text><ellipse cx="1059" cy="3091.6797" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1059,3099.6797 L1059,3126.6797 M1046,3107.6797 L1072,3107.6797 M1059,3126.6797 L1046,3141.6797 M1059,3126.6797 L1072,3141.6797 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1137.5" y="86.5332">Network</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1089.5" y="104.1426">(User2,User3,...,UserN)</text><ellipse cx="1165.5" cy="15" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1165.5,23 L1165.5,50 M1152.5,31 L1178.5,31 M1165.5,50 L1152.5,65 M1165.5,50 L1178.5,65 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1137.5" y="3078.6035">Network</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1089.5" y="3096.2129">(User2,User3,...,UserN)</text><ellipse cx="1165.5" cy="3109.2891" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1165.5,3117.2891 L1165.5,3144.2891 M1152.5,3125.2891 L1178.5,3125.2891 M1165.5,3144.2891 L1152.5,3159.2891 M1165.5,3144.2891 L1178.5,3159.2891 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1255" y="86.5332">Remote Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1251.5" y="104.1426">(User*User*History)</text><ellipse cx="1315" cy="15" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1315,23 L1315,50 M1302,31 L1328,31 M1315,50 L1302,65 M1315,50 L1328,65 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1255" y="3078.6035">Remote Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1251.5" y="3096.2129">(User*User*History)</text><ellipse cx="1315" cy="3109.2891" fill="#FEFECE" filter="url(#fzmftz1zxht66)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1315,3117.2891 L1315,3144.2891 M1302,3125.2891 L1328,3125.2891 M1315,3144.2891 L1302,3159.2891 M1315,3144.2891 L1328,3159.2891 " fill="none" filter="url(#fzmftz1zxht66)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="370.0234" style="stroke:#A80036;stroke-width:1.0;" width="10" x="452.5" y="183.9219"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="623" y="1719.3984"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="261.5156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="770" y="2383.6875"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="168.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="891.5" y="645"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="984" y="1247.7734"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="984" y="2066.1719"/><rect fill="#FFFFFF" filter="url(#fzmftz1zxht66)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1054" y="2537.7969"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1383.5" x="0" y="138.3945"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="138.3945" y2="138.3945"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="141.3945" y2="141.3945"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="159" x="612.25" y="127.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="618.25" y="144.7139">User1 opens the agent</text><polygon fill="#A80036" points="440.5,179.9219,450.5,183.9219,440.5,187.9219,444.5,183.9219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="446.5" y1="183.9219" y2="183.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="48.5" y="179.0654">Opens Agent</text><polygon fill="#A80036" points="841.5,193.9219,851.5,197.9219,841.5,201.9219,845.5,197.9219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="847.5" y1="197.9219" y2="197.9219"/><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="66.8281" style="stroke:#A80036;stroke-width:1.5;" width="82" x="853.5" y="191.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="860.5" y="213.4551">Distributed</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="879.5" y="231.0645">Data</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="866.5" y="248.6738">Manager</text><polygon fill="#A80036" points="937.5,275.75,947.5,279.75,937.5,283.75,941.5,279.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="943.5" y1="279.75" y2="279.75"/><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="66.8281" style="stroke:#A80036;stroke-width:1.5;" width="75" x="949.5" y="273.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="962.5" y="295.2832">Remote</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="956.5" y="312.8926">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="959" y="330.502">Manager</text><polygon fill="#A80036" points="271.5,357.5781,261.5,361.5781,271.5,365.5781,267.5,361.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="265.5" x2="451.5" y1="361.5781" y2="361.5781"/><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="86" x="170.5" y="355.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="177.5" y="377.1113">UI Manager</text><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="504.5" y1="440.8906" y2="440.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="504.5" x2="504.5" y1="440.8906" y2="453.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="463.5" x2="504.5" y1="453.8906" y2="453.8906"/><polygon fill="#A80036" points="473.5,449.8906,463.5,453.8906,473.5,457.8906,469.5,453.8906" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="469.5" y="419.6826">isUsernameValid = False</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="469.5" y="436.0342">user_list = null</text><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1383.5" x="0" y="483.0664"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="483.0664" y2="483.0664"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="486.0664" y2="486.0664"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="96" x="643.75" y="471.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="78" x="649.75" y="489.3857">Login phase</text><path d="M10,513.2422 L83,513.2422 L83,521.2422 L73,531.2422 L10,531.2422 L10,513.2422 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="537.1641" style="stroke:#000000;stroke-width:2.0;" width="1251.5" x="10" y="513.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="527.7373">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="115" x="98" y="526.6611">[if !isUsernameValid]</text><polygon fill="#A80036" points="226.5,549.9453,216.5,553.9453,226.5,557.9453,222.5,553.9453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="456.5" y1="553.9453" y2="553.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="232.5" y="549.0889">inputDialogBox(login)</text><polygon fill="#A80036" points="203.5,580.2969,213.5,584.2969,203.5,588.2969,207.5,584.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="209.5" y1="584.2969" y2="584.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="48.5" y="579.4404">Logins attempt as "name"</text><polygon fill="#A80036" points="445.5,610.6484,455.5,614.6484,445.5,618.6484,449.5,614.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="215.5" x2="451.5" y1="614.6484" y2="614.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="222.5" y="609.792">eventLogin("name")</text><polygon fill="#A80036" points="879.5,641,889.5,645,879.5,649,883.5,645" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="885.5" y1="645" y2="645"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="464.5" y="640.1436">verifyUnicity()</text><polygon fill="#A80036" points="1153.5,687.7031,1163.5,691.7031,1153.5,695.7031,1157.5,691.7031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="901.5" x2="1159.5" y1="691.7031" y2="691.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="908.5" y="670.4951">Request via</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="908.5" y="686.8467">UDP broadcast</text><polygon fill="#A80036" points="912.5,718.0547,902.5,722.0547,912.5,726.0547,908.5,722.0547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="906.5" x2="1164.5" y1="722.0547" y2="722.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="918.5" y="717.1982">User2_ID, ethernet address</text><polygon fill="#A80036" points="912.5,748.4063,902.5,752.4063,912.5,756.4063,908.5,752.4063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="906.5" x2="1164.5" y1="752.4063" y2="752.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="918.5" y="747.5498">. . .</text><polygon fill="#A80036" points="912.5,778.7578,902.5,782.7578,912.5,786.7578,908.5,782.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="906.5" x2="1164.5" y1="782.7578" y2="782.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="918.5" y="777.9014">UserN_ID</text><polygon fill="#A80036" points="468.5,809.1094,458.5,813.1094,468.5,817.1094,464.5,813.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="895.5" y1="813.1094" y2="813.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="474.5" y="808.2529">user_list</text><path d="M160.5,828.1094 L221.5,828.1094 L221.5,836.1094 L211.5,846.1094 L160.5,846.1094 L160.5,828.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="215.2969" style="stroke:#000000;stroke-width:2.0;" width="1091" x="160.5" y="828.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="175.5" y="842.6045">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="236.5" y="841.5283">[user_list.find("name") == false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="499.5" y1="868.8125" y2="868.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="499.5" x2="499.5" y1="868.8125" y2="881.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="458.5" x2="499.5" y1="881.8125" y2="881.8125"/><polygon fill="#A80036" points="468.5,877.8125,458.5,881.8125,468.5,885.8125,464.5,881.8125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="464.5" y="863.9561">isUsernameValid = True</text><polygon fill="#A80036" points="884.5,908.1641,894.5,912.1641,884.5,916.1641,888.5,912.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="890.5" y1="912.1641" y2="912.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="464.5" y="907.3076">notifyConnection("name")</text><polygon fill="#A80036" points="1153.5,954.8672,1163.5,958.8672,1153.5,962.8672,1157.5,958.8672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="896.5" x2="1159.5" y1="958.8672" y2="958.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="903.5" y="937.6592">Notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="903.5" y="954.0107">via UDP broadcast</text><polygon fill="#A80036" points="226.5,985.2188,216.5,989.2188,226.5,993.2188,222.5,989.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="456.5" y1="989.2188" y2="989.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="232.5" y="984.3623">display(user_list)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="160.5" x2="1251.5" y1="998.2188" y2="998.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171" x="165.5" y="1009.6377">[user_list.find("name") == true]</text><polygon fill="#A80036" points="226.5,1031.4063,216.5,1035.4063,226.5,1039.4063,222.5,1035.4063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="456.5" y1="1035.4063" y2="1035.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="232.5" y="1030.5498">errorMessage("Name Already Taken")</text><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1383.5" x="0" y="1078.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="1078.582" y2="1078.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="1081.582" y2="1081.582"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="289" x="547.25" y="1067.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="271" x="553.25" y="1084.9014">User1 wants to chat with (connected) User2</text><polygon fill="#A80036" points="203.5,1136.4609,213.5,1140.4609,203.5,1144.4609,207.5,1140.4609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="209.5" y1="1140.4609" y2="1140.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="48.5" y="1119.2529">Starts Chatting Session</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="48.5" y="1135.6045">with User2</text><polygon fill="#A80036" points="445.5,1166.8125,455.5,1170.8125,445.5,1174.8125,449.5,1170.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="215.5" x2="451.5" y1="1170.8125" y2="1170.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="222.5" y="1165.9561">eventNewChat(User2)</text><polygon fill="#A80036" points="547.5,1197.1641,557.5,1201.1641,547.5,1205.1641,551.5,1201.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="553.5" y1="1201.1641" y2="1201.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="464.5" y="1196.3076">create(User2)</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="133" x="559.5" y="1178.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="566.5" y="1200.3457">Chatting Session 1</text><polygon fill="#A80036" points="972,1243.7734,982,1247.7734,972,1251.7734,976,1247.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="978" y1="1247.7734" y2="1247.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="635" y="1242.917">retrieveHistory(User2)</text><polygon fill="#A80036" points="1303,1274.125,1313,1278.125,1303,1282.125,1307,1278.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="994" x2="1309" y1="1278.125" y2="1278.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="1001" y="1273.2686">SQL request</text><polygon fill="#A80036" points="1005,1304.4766,995,1308.4766,1005,1312.4766,1001,1308.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="999" x2="1314" y1="1308.4766" y2="1308.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1011" y="1303.6201">history_user2</text><polygon fill="#A80036" points="639,1334.8281,629,1338.8281,639,1342.8281,635,1338.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="633" x2="988" y1="1338.8281" y2="1338.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="645" y="1333.9717">history_user2</text><polygon fill="#A80036" points="226.5,1365.1797,216.5,1369.1797,226.5,1373.1797,222.5,1369.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="627" y1="1369.1797" y2="1369.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="232.5" y="1364.3232">openChattingSession(User2)</text><polygon fill="#A80036" points="226.5,1395.5313,216.5,1399.5313,226.5,1403.5313,222.5,1399.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="627" y1="1399.5313" y2="1399.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="232.5" y="1394.6748">display(history_user2)</text><polygon fill="#A80036" points="203.5,1425.8828,213.5,1429.8828,203.5,1433.8828,207.5,1429.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="209.5" y1="1429.8828" y2="1429.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="48.5" y="1425.0264">Sends Message M1</text><polygon fill="#A80036" points="616,1456.2344,626,1460.2344,616,1464.2344,620,1460.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="215.5" x2="622" y1="1460.2344" y2="1460.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="222.5" y="1455.3779">eventSendMessage(M1)</text><polygon fill="#A80036" points="1047,1486.5859,1057,1490.5859,1047,1494.5859,1051,1490.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="1053" y1="1490.5859" y2="1490.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="635" y="1485.7295">getTime()</text><polygon fill="#A80036" points="639,1516.9375,629,1520.9375,639,1524.9375,635,1520.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="633" x2="1058" y1="1520.9375" y2="1520.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="645" y="1516.0811">current_time</text><polygon fill="#A80036" points="1153.5,1563.6406,1163.5,1567.6406,1153.5,1571.6406,1157.5,1567.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="1159.5" y1="1567.6406" y2="1567.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="635" y="1546.4326">Request (TCP) connection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="635" y="1562.7842">with User2</text><polygon fill="#A80036" points="1153.5,1593.9922,1163.5,1597.9922,1153.5,1601.9922,1157.5,1597.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="1159.5" y1="1597.9922" y2="1597.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="635" y="1593.1357">sendMessage(User2,M1)</text><polygon fill="#A80036" points="977,1624.3438,987,1628.3438,977,1632.3438,981,1628.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="983" y1="1628.3438" y2="1628.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="635" y="1623.4873">updateHistory(User2,M1)</text><polygon fill="#A80036" points="1303,1654.6953,1313,1658.6953,1303,1662.6953,1307,1658.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="989" x2="1309" y1="1658.6953" y2="1658.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="996" y="1653.8389">SQL request</text><polygon fill="#A80036" points="226.5,1685.0469,216.5,1689.0469,226.5,1693.0469,222.5,1689.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="627" y1="1689.0469" y2="1689.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="232.5" y="1684.1904">addMessage(M1)</text><polygon fill="#A80036" points="644,1715.3984,634,1719.3984,644,1723.3984,640,1719.3984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="638" x2="1164.5" y1="1719.3984" y2="1719.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="650" y="1714.542">receiveMessage(User2,M2)</text><polygon fill="#A80036" points="226.5,1745.75,216.5,1749.75,226.5,1753.75,222.5,1749.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="627" y1="1749.75" y2="1749.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="232.5" y="1744.8936">addMessage(M2)</text><polygon fill="#A80036" points="203.5,1776.1016,213.5,1780.1016,203.5,1784.1016,207.5,1780.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="209.5" y1="1780.1016" y2="1780.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="48.5" y="1775.2451">Closes Chatting Session</text><polygon fill="#A80036" points="445.5,1806.4531,455.5,1810.4531,445.5,1814.4531,449.5,1810.4531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="215.5" x2="451.5" y1="1810.4531" y2="1810.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="222.5" y="1805.5967">eventClose(chat1)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="670" y1="1824.4531" y2="1824.4531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="670" x2="670" y1="1824.4531" y2="1837.4531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="629" x2="670" y1="1837.4531" y2="1837.4531"/><polygon fill="#A80036" points="639,1833.4531,629,1837.4531,639,1841.4531,635,1837.4531" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="616,1863.8047,626,1867.8047,616,1871.8047,620,1867.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="622" y1="1867.8047" y2="1867.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="464.5" y="1862.9482">close()</text><line style="stroke:#A80036;stroke-width:2.0;" x1="619" x2="637" y1="1858.8047" y2="1876.8047"/><line style="stroke:#A80036;stroke-width:2.0;" x1="619" x2="637" y1="1876.8047" y2="1858.8047"/><polygon fill="#A80036" points="226.5,1894.1563,216.5,1898.1563,226.5,1902.1563,222.5,1898.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="456.5" y1="1898.1563" y2="1898.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="232.5" y="1893.2998">closeChattingSession(User2)</text><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1383.5" x="0" y="1927.332"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="1927.332" y2="1927.332"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="1930.332" y2="1930.332"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="254" x="564.75" y="1916.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="236" x="570.75" y="1933.6514">User1 receives a message from User3</text><polygon fill="#A80036" points="468.5,1985.2109,458.5,1989.2109,468.5,1993.2109,464.5,1989.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="1164.5" y1="1989.2109" y2="1989.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="474.5" y="1968.0029">Incoming TCP connection request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="474.5" y="1984.3545">from User3</text><polygon fill="#A80036" points="694.5,2015.5625,704.5,2019.5625,694.5,2023.5625,698.5,2019.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="700.5" y1="2019.5625" y2="2019.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="464.5" y="2014.7061">create(User3)</text><rect fill="#FEFECE" filter="url(#fzmftz1zxht66)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="133" x="706.5" y="1997.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="713.5" y="2018.7441">Chatting Session 2</text><polygon fill="#A80036" points="972,2062.1719,982,2066.1719,972,2070.1719,976,2066.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="775" x2="978" y1="2066.1719" y2="2066.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="782" y="2061.3154">retrieveHistory(User3)</text><polygon fill="#A80036" points="1303,2092.5234,1313,2096.5234,1303,2100.5234,1307,2096.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="994" x2="1309" y1="2096.5234" y2="2096.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="1001" y="2091.667">SQL request</text><polygon fill="#A80036" points="1005,2122.875,995,2126.875,1005,2130.875,1001,2126.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="999" x2="1314" y1="2126.875" y2="2126.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1011" y="2122.0186">history_user3</text><polygon fill="#A80036" points="786,2153.2266,776,2157.2266,786,2161.2266,782,2157.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="780" x2="988" y1="2157.2266" y2="2157.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="792" y="2152.3701">history_user3</text><polygon fill="#A80036" points="1153.5,2183.5781,1163.5,2187.5781,1153.5,2191.5781,1157.5,2187.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="775" x2="1159.5" y1="2187.5781" y2="2187.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="782" y="2182.7217">Accept TCP connection with User3</text><polygon fill="#A80036" points="226.5,2213.9297,216.5,2217.9297,226.5,2221.9297,222.5,2217.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="774" y1="2217.9297" y2="2217.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="232.5" y="2213.0732">openChattingSession(User3)</text><polygon fill="#A80036" points="226.5,2244.2813,216.5,2248.2813,226.5,2252.2813,222.5,2248.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="774" y1="2248.2813" y2="2248.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="232.5" y="2243.4248">display(history_user3)</text><polygon fill="#A80036" points="786,2274.6328,776,2278.6328,786,2282.6328,782,2278.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="780" x2="1164.5" y1="2278.6328" y2="2278.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="792" y="2273.7764">receiveMessage(User3,M3)</text><polygon fill="#A80036" points="226.5,2304.9844,216.5,2308.9844,226.5,2312.9844,222.5,2308.9844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="774" y1="2308.9844" y2="2308.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="232.5" y="2304.1279">addMessage(M3)</text><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1383.5" x="0" y="2338.1602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="2338.1602" y2="2338.1602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="2341.1602" y2="2341.1602"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="184" x="599.75" y="2326.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166" x="605.75" y="2344.4795">User1 sends a file to User3</text><polygon fill="#A80036" points="758,2379.6875,768,2383.6875,758,2387.6875,762,2383.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="764" y1="2383.6875" y2="2383.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="48.5" y="2378.8311">Sends File F1</text><polygon fill="#A80036" points="1153.5,2426.3906,1163.5,2430.3906,1153.5,2434.3906,1157.5,2430.3906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="780" x2="1159.5" y1="2430.3906" y2="2430.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="787" y="2409.1826">File transfert request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="787" y="2425.5342">to User3</text><polygon fill="#A80036" points="791,2473.0938,781,2477.0938,791,2481.0938,787,2477.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="785" x2="1164.5" y1="2477.0938" y2="2477.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="797" y="2455.8857">File transfert accept</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="797" y="2472.2373">from User3</text><polygon fill="#A80036" points="1153.5,2503.4453,1163.5,2507.4453,1153.5,2511.4453,1157.5,2507.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="780" x2="1159.5" y1="2507.4453" y2="2507.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="787" y="2502.5889">sendFile(User3,F1)</text><polygon fill="#A80036" points="1042,2533.7969,1052,2537.7969,1042,2541.7969,1046,2537.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="780" x2="1048" y1="2537.7969" y2="2537.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="787" y="2532.9404">getTime()</text><polygon fill="#A80036" points="791,2564.1484,781,2568.1484,791,2572.1484,787,2568.1484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="785" x2="1058" y1="2568.1484" y2="2568.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="797" y="2563.292">current_time</text><polygon fill="#A80036" points="1153.5,2610.8516,1163.5,2614.8516,1153.5,2618.8516,1157.5,2614.8516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="780" x2="1159.5" y1="2614.8516" y2="2614.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="787" y="2593.6436">sendMessage(User3,M4)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="787" y="2609.9951">(M4 is file name, size and date it was sent)</text><polygon fill="#A80036" points="977,2641.2031,987,2645.2031,977,2649.2031,981,2645.2031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="775" x2="983" y1="2645.2031" y2="2645.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="782" y="2640.3467">updateHistory(User3,M4)</text><polygon fill="#A80036" points="1303,2671.5547,1313,2675.5547,1303,2679.5547,1307,2675.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="989" x2="1309" y1="2675.5547" y2="2675.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="996" y="2670.6982">SQL request</text><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1383.5" x="0" y="2704.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="2704.7305" y2="2704.7305"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1383.5" y1="2707.7305" y2="2707.7305"/><rect fill="#EEEEEE" filter="url(#fzmftz1zxht66)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="160" x="611.75" y="2693.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142" x="617.75" y="2711.0498">User1 closes the agent</text><polygon fill="#A80036" points="203.5,2746.2578,213.5,2750.2578,203.5,2754.2578,207.5,2750.2578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41.5" x2="209.5" y1="2750.2578" y2="2750.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="48.5" y="2745.4014">Closes Agent</text><polygon fill="#A80036" points="445.5,2776.6094,455.5,2780.6094,445.5,2784.6094,449.5,2780.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="215.5" x2="451.5" y1="2780.6094" y2="2780.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="222.5" y="2775.7529">eventClose()</text><polygon fill="#A80036" points="763,2806.9609,773,2810.9609,763,2814.9609,767,2810.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="769" y1="2810.9609" y2="2810.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="464.5" y="2806.1045">close()</text><polygon fill="#A80036" points="1153.5,2853.6641,1163.5,2857.6641,1153.5,2861.6641,1157.5,2857.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="775" x2="1159.5" y1="2857.6641" y2="2857.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="782" y="2836.4561">End (TCP) connection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="782" y="2852.8076">with User3</text><line style="stroke:#A80036;stroke-width:1.0;" x1="775" x2="817" y1="2871.6641" y2="2871.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="817" x2="817" y1="2871.6641" y2="2884.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="776" x2="817" y1="2884.6641" y2="2884.6641"/><polygon fill="#A80036" points="786,2880.6641,776,2884.6641,786,2888.6641,782,2884.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="766" x2="784" y1="2875.6641" y2="2893.6641"/><line style="stroke:#A80036;stroke-width:2.0;" x1="766" x2="784" y1="2893.6641" y2="2875.6641"/><polygon fill="#A80036" points="884.5,2911.0156,894.5,2915.0156,884.5,2919.0156,888.5,2915.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="890.5" y1="2915.0156" y2="2915.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="464.5" y="2910.1592">notifyUsers()</text><polygon fill="#A80036" points="1153.5,2957.7188,1163.5,2961.7188,1153.5,2965.7188,1157.5,2961.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="896.5" x2="1159.5" y1="2961.7188" y2="2961.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="903.5" y="2940.5107">Notify via</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="903.5" y="2956.8623">UDP broadcast</text><polygon fill="#A80036" points="884.5,2971.7188,894.5,2975.7188,884.5,2979.7188,888.5,2975.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="890.5" y1="2975.7188" y2="2975.7188"/><line style="stroke:#A80036;stroke-width:2.0;" x1="887.5" x2="905.5" y1="2966.7188" y2="2984.7188"/><line style="stroke:#A80036;stroke-width:2.0;" x1="887.5" x2="905.5" y1="2984.7188" y2="2966.7188"/><polygon fill="#A80036" points="977,2985.7188,987,2989.7188,977,2993.7188,981,2989.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="983" y1="2989.7188" y2="2989.7188"/><line style="stroke:#A80036;stroke-width:2.0;" x1="980" x2="998" y1="2980.7188" y2="2998.7188"/><line style="stroke:#A80036;stroke-width:2.0;" x1="980" x2="998" y1="2998.7188" y2="2980.7188"/><polygon fill="#A80036" points="226.5,2999.7188,216.5,3003.7188,226.5,3007.7188,222.5,3003.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="220.5" x2="456.5" y1="3003.7188" y2="3003.7188"/><line style="stroke:#A80036;stroke-width:2.0;" x1="206.5" x2="224.5" y1="2994.7188" y2="3012.7188"/><line style="stroke:#A80036;stroke-width:2.0;" x1="206.5" x2="224.5" y1="3012.7188" y2="2994.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="499.5" y1="3034.0703" y2="3034.0703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="499.5" x2="499.5" y1="3034.0703" y2="3047.0703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="458.5" x2="499.5" y1="3047.0703" y2="3047.0703"/><polygon fill="#A80036" points="468.5,3043.0703,458.5,3047.0703,468.5,3051.0703,464.5,3047.0703" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="464.5" y="3029.2139">close()</text><line style="stroke:#A80036;stroke-width:2.0;" x1="448.5" x2="466.5" y1="3038.0703" y2="3056.0703"/><line style="stroke:#A80036;stroke-width:2.0;" x1="448.5" x2="466.5" y1="3056.0703" y2="3038.0703"/><!--MD5=[fff705725d5c9d4c64b7da4f0137b170]
@startuml sequence_white_box
actor User1 as User
box "Chat Agent"
  participant  "UI Manager" as UI
  participant "Main Class\n(and other classes)" as chatAgent
  participant "Chatting Session 1" as chat1
  participant "Chatting Session 2" as chat2
  participant "Distributed\nData\nManager" as distributedManager
  participant "Remote\nDatabase\nManager" as databaseManager
end box

actor "Clock" as Clock
actor "Network\n(User2,User3,...,UserN)" as Network
actor "Remote Database\n(User*User*History)" as db

== User1 opens the agent ==
User -> chatAgent ++ : Opens Agent
  chatAgent -> distributedManager **
  chatAgent -> databaseManager ** 
  UI <- chatAgent ** 
  chatAgent -> chatAgent : isUsernameValid = False\nuser_list = null
  


== Login phase ==

loop if !isUsernameValid
  chatAgent -> UI - - : inputDialogBox(login)
  User -> UI : Logins attempt as "name"
  UI -> chatAgent : eventLogin("name")

  chatAgent -> distributedManager ++ : verifyUnicity()
  distributedManager -> Network : Request via\nUDP broadcast
  
  Network -> distributedManager : User2_ID, ethernet address
  Network -> distributedManager : . . . 
  Network -> distributedManager : UserN_ID
  
  distributedManager -> chatAgent - - : user_list 
  
  alt user_list.find("name") == false

    chatAgent -> chatAgent : isUsernameValid = True
    chatAgent -> distributedManager : notifyConnection("name")
    distributedManager -> Network : Notification\nvia UDP broadcast
    UI <- chatAgent : display(user_list)
  
  else user_list.find("name") == true

      UI <- chatAgent : errorMessage("Name Already Taken")

  end

end

== User1 wants to chat with (connected) User2 ==

User -> UI : Starts Chatting Session\nwith User2
  UI -> chatAgent : eventNewChat(User2)
  chatAgent -> chat1 ** : create(User2)

  chat1 -> databaseManager ++ : retrieveHistory(User2)
    databaseManager -> db : SQL request
    db -> databaseManager : history_user2
  databaseManager -> chat1 - - : history_user2

  chat1 -> UI : openChattingSession(User2)
chat1 -> UI - - : display(history_user2)

User -> UI : Sends Message M1
UI -> chat1 : eventSendMessage(M1)
chat1 -> Clock : getTime()
Clock -> chat1 : current_time

chat1 -> Network : Request (TCP) connection\nwith User2
chat1 -> Network : sendMessage(User2,M1)

chat1 -> databaseManager : updateHistory(User2,M1)
    databaseManager -> db : SQL request
chat1 -> UI - - : addMessage(M1)

Network -> chat1 ++ : receiveMessage(User2,M2)
chat1 -> UI - - : addMessage(M2)

User -> UI : Closes Chatting Session
UI -> chatAgent : eventClose(chat1)
chat1 -> chat1 : 
chatAgent -> chat1 !! : close()
chatAgent -> UI : closeChattingSession(User2)

== User1 receives a message from User3 ==

Network -> chatAgent : Incoming TCP connection request\nfrom User3
  chatAgent -> chat2 ** : create(User3)
    chat2 -> databaseManager ++ : retrieveHistory(User3)
    databaseManager -> db : SQL request
    db -> databaseManager : history_user3
  databaseManager -> chat2 - - : history_user3
  chat2 -> Network : Accept TCP connection with User3 
  chat2 -> UI : openChattingSession(User3)
  chat2 -> UI : display(history_user3)
  Network -> chat2 : receiveMessage(User3,M3)
chat2 -> UI - - : addMessage(M3)

== User1 sends a file to User3 ==
User -> chat2 ++ : Sends File F1
chat2 -> Network : File transfert request\nto User3
Network -> chat2 : File transfert accept\nfrom User3
chat2 -> Network : sendFile(User3,F1)
chat2 -> Clock ++ : getTime()
Clock -> chat2 - - : current_time
chat2 -> Network : sendMessage(User3,M4)\n(M4 is file name, size and date it was sent)
chat2 -> databaseManager - - : updateHistory(User3,M4)
  databaseManager -> db : SQL request
== User1 closes the agent ==

User -> UI : Closes Agent
UI -> chatAgent : eventClose()
chatAgent -> chat2 : close()
chat2 -> Network : End (TCP) connection\nwith User3
chat2 -> chat2 !!
chatAgent -> distributedManager : notifyUsers()
distributedManager -> Network : Notify via\nUDP broadcast
chatAgent -> distributedManager !!
chatAgent -> databaseManager !!
chatAgent -> UI !!
chatAgent -> chatAgent !! : close()
@enduml

PlantUML version 1.2021.14(Fri Nov 12 17:46:50 CET 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>